# mhwd Driver Config

NAME="video-nvidia-dkms"
INFO="Closed source NVIDIA drivers for linux."
VERSION="2022.01.30"
FREEDRIVER="false"
PRIORITY="20"

CLASSIDS="0300 0302"
VENDORIDS="10de"
DEVICEIDS=">/var/lib/mhwd/ids/pci/nvidia.ids"

# Conflicts
CONFLICTS="nvidia-390xx-utils vidia-470x-utils"
CONFLICTS_64="lib32-nvidia-390xx-utils lib32-nvidia-470xx-utils"
CONKMOD="nvidia-390xx nvidia-470xx"

# Conflicts with other mhwd configs
MHWDCONFLICTS="video*nvidia*"

# Dependencies
DEPENDS="egl-wayland
         nvidia-utils
         nvidia-settings
         opencl-nvidia
         libva-nvidia-driver"
DEPENDS_64="lib32-nvidia-utils lib32-opencl-nvidia"
DEPKMOD="nvidia-dkms"

post_install()
{
    mhwd-gpu --setmod nvidia
}

post_remove()
{
    mhwd-gpu --check
    mhwd-gpu --cleanup
}
